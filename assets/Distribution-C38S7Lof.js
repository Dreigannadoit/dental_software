import{j as e,b5 as g,bh as K,aA as R,bu as y,bz as j,r as m,bw as D,bx as L,by as B}from"./index-65aRkmu-.js";import{u as A}from"./useExportCsv-C75Tm91b.js";const z=({data:o})=>{const l=()=>e.jsx("div",{children:e.jsx(R,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})}),t=(n,a,d)=>{const s=n[a];return e.jsxs(g.Fragment,{children:[e.jsx("tr",{children:e.jsxs("td",{colSpan:"9",className:"section-header",children:[n.year," - ",d]})}),s.length>0?s.map((r,x)=>e.jsxs("tr",{className:"editable_content",children:[e.jsx("td",{children:r.name}),e.jsx("td",{children:l()}),e.jsx("td",{children:e.jsx(K,{})}),e.jsx("td",{children:l()}),e.jsx("td",{children:l()}),e.jsx("td",{children:l()}),e.jsx("td",{children:l()}),e.jsx("td",{children:l()}),e.jsx("td",{children:e.jsx("button",{className:"main_btn_style",children:"save"})})]},x)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"9",children:["No records for ",d]})})]},a)};return e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow fixed-header",children:e.jsxs("tr",{children:[e.jsx("th",{children:"School Name"}),e.jsx("th",{children:"Enrolled"}),e.jsx("th",{children:"Distr."}),e.jsx("th",{children:"Number of Classrooms"}),e.jsx("th",{children:"Number of Consent Packer"}),e.jsx("th",{children:"Total Number of Forms Distr."}),e.jsx("th",{children:"Consents"}),e.jsx("th",{children:"Nurse / Contact Person"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:o.map((n,a)=>e.jsxs(g.Fragment,{children:[t(n,"preK","Pre K"),t(n,"k5","K-5"),t(n,"m6_8","Middle 6-8"),t(n,"high9_12","High 9-12")]},a))})]})})},q=(o,l)=>{const t=s=>s?s.toString().toLowerCase():"",n=t(l.search||""),a=l.year;return o.filter(s=>!a||s.year===a).map(s=>({...s,preK:s.preK.filter(r=>t(r.name).includes(n)),k5:s.k5.filter(r=>t(r.name).includes(n)),m6_8:s.m6_8.filter(r=>t(r.name).includes(n)),high9_12:s.high9_12.filter(r=>t(r.name).includes(n))})).filter(s=>s.preK.length||s.k5.length||s.m6_8.length||s.high9_12.length)},Q=()=>{const{filters:o,rowsPerPage:l,currentPage:t,currentPageData:n,totalPages:a,handleFilterChange:d,handleRowsPerPageChange:s,handlePageChange:r,loading:x}=y(j,{search:"",year:"Csdp Program Sy 2020 - 2021"},q),N=A(),b=m.useRef(null),u=m.useRef(!1),p=()=>{const h=(_=>{const f=[];return _.forEach(C=>{const{year:P,preK:k,k5:E,m6_8:F,high9_12:v}=C;[k,E,F,v].forEach((w,S)=>{const T=["preK","k5","m6_8","high9_12"][S];w.forEach(i=>{f.push({year:P,group:T,name:i.name,enrolled:i.enrolled,distribution:i.distribution,classroomNum:i.classroomNum,consentPackerNum:i.consentPackerNum,totalFormsDisNum:i.totalFormsDisNum,consents:i.consents,nurse_contact_person:i.nurse_contact_person})})})}),f})(j);N(h,"Eligibility.csv")};return m.useEffect(()=>{const c=b.current,h=()=>{c&&!u.current&&(u.current=!0,requestAnimationFrame(()=>{c.scrollLeft+=1,u.current=!1}))};return c&&c.addEventListener("scroll",h),()=>{c&&c.removeEventListener("scroll",h)}},[]),e.jsxs("div",{className:"distribution auto-sizing",children:[e.jsx(D,{filters:o,onFilterChange:d,data:j,hasYearFilter:!0}),e.jsxs("div",{className:"table_controls",children:[e.jsx("button",{className:"Export_BTN shadow",onClick:p,children:"Export"}),e.jsx(L,{rowsPerPage:l,handleRowsPerPageChange:s})]}),e.jsx("div",{className:"table_area",ref:b,children:x?e.jsx(B,{}):e.jsx("div",{className:"container",children:e.jsx(z,{data:n})})}),a>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>r(t-1),disabled:t===1,children:"Back"}),e.jsxs("span",{children:["Page ",t," of ",a]}),e.jsx("button",{className:"shadow",onClick:()=>r(t+1),disabled:t===a,children:"Next"})]})]})};export{Q as default};
