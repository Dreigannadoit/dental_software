import{r as b,u as g,j as e,P as f,J as N,A as j,L as C,M as A,bd as D,be as P,aA as w,bi as S,bu as v,bD as p,bw as k,bx as F,by as _}from"./index-65aRkmu-.js";import{u as y,C as E}from"./useUpdateStatus-KQ5WLuGm.js";const G=({data:o})=>{const[t,s]=b.useState(!0),{updateStatus:a,setChangeStatusRef:r}=y(),{isVisible:l,isExiting:d,popupData:n,openPopup:c,closePopup:h}=g(),u=()=>{n&&console.log("Request to delete patient with ID:",n.id),h()},m=[...o].sort((i,x)=>t?i.id-x.id:x.id-i.id);return e.jsxs(e.Fragment,{children:[l&&e.jsx(f,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${n==null?void 0:n.name}. This action cannot be undone.`,icon:N,onConfirm:u,onCancel:h,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:d,customClass:"delete-popup"}),e.jsx(E,{ref:i=>r(i)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>s(!t),className:`${t?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:m.length>0?m.map((i,x)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:i.id}),e.jsx("td",{children:i.name}),e.jsx("td",{children:i.description}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(j,{type:"routerLink",classLabel:"edit_patient",label:"Edit",icon:C,backgroundColor:"#1E8631",url:"#"}),e.jsx(j,{type:"button",classLabel:"delete_patient",label:"Delete",icon:A,backgroundColor:"#FF1A1A",method:()=>c(i)})]})]},x)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},L=({exitUser:o})=>{const{isVisible:t,isInitialized:s,triggerEnter:a,triggerExit:r}=D(500);b.useEffect(()=>{a()},[a]);const l=()=>{r(()=>{o&&o()})};return P.createPortal(e.jsxs("div",{className:`form_container grade_form_container glassmorphism shadow ${s?t?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:l}),e.jsx("div",{className:"form grade_form glassmorphism shadow",children:e.jsxs("form",{action:"",children:[e.jsx("h1",{children:"Add Grade"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name full",children:[e.jsx("label",{htmlFor:"schooName",children:"Name"}),e.jsx(w,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"description full",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx(S,{size:"lg",variant:"outlined",sx:{borderColor:"rgb(158, 158, 158)",borderWidth:"1px",borderRadius:"5px",background:"transparent",width:"100%"}})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:l,children:"Cancel"})]})]})})]}),document.body)},T=(o,t)=>{const s=a=>a?a.toString().toLowerCase():"";return o.filter(a=>{var d,n;const r=s(t.search||"");return!t.search||[(d=a.name)==null?void 0:d.toString(),(n=a.id)==null?void 0:n.toString(),a.description].some(c=>s(c).includes(r))})},I=()=>{const{filters:o,rowsPerPage:t,currentPage:s,currentPageData:a,totalPages:r,handleFilterChange:l,handleRowsPerPageChange:d,handlePageChange:n,loading:c}=v(p,{search:""},T),[h,u]=b.useState(!1),m=()=>u(!0),i=()=>u(!1);return e.jsxs(e.Fragment,{children:[h&&e.jsx(L,{exitUser:i}),e.jsxs("div",{className:"grade auto-sizing",children:[e.jsx(k,{filters:o,onFilterChange:l,data:p,hasAddToTableButton:!0,method:m}),e.jsx("div",{className:"table_controls",children:e.jsx(F,{rowsPerPage:t,handleRowsPerPageChange:d})}),e.jsxs("div",{className:"table_area",children:[c&&e.jsx(_,{}),e.jsx(G,{data:a})]}),r>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>n(s-1),disabled:s===1,children:"Back"}),e.jsxs("span",{children:["Page ",s," of ",r]}),e.jsx("button",{className:"shadow",onClick:()=>n(s+1),disabled:s===r,children:"Next"})]})]})]})};export{I as default};
