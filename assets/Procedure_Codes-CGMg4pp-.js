import{r as m,u as N,j as e,P as A,J as D,A as f,L as S,M as w,bd as E,be as _,aA as P,bi as k,by as F,bQ as v,bA as y,bB as T,bC as L}from"./index-Bv4EZULt.js";import{u as R,C as I}from"./useUpdateStatus-DwGrJaqf.js";const B=({data:r,onEditProcedureCode:n})=>{const[t,a]=m.useState(!0),{updateStatus:i,setChangeStatusRef:x}=R(),{isVisible:l,isExiting:c,popupData:o,openPopup:g,closePopup:u}=N(),j=()=>{o&&console.log("Request to delete patient with ID:",o.id),u()},b=[...r].sort((s,h)=>t?s.id-h.id:h.id-s.id);return e.jsxs(e.Fragment,{children:[l&&e.jsx(A,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${o==null?void 0:o.code}. This action cannot be undone.`,icon:D,onConfirm:j,onCancel:u,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:c,customClass:"delete-popup"}),e.jsx(I,{ref:s=>x(s)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>a(!t),className:`${t?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:b.length>0?b.map((s,h)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.code}),e.jsx("td",{children:s.description}),e.jsx("td",{children:s.price}),e.jsx("td",{className:`${s.status==="Active"||s.status==="active"||s.status===!0?"active":"inactive "}`,children:e.jsx("span",{children:e.jsx("button",{onClick:()=>i(s),children:s.status==="Active"||s.status==="active"||s.status===!0?"Active":"Inactive"})})}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(f,{type:"button",classLabel:"edit_patient",label:"Edit",icon:S,backgroundColor:"#1E8631",method:()=>n(s)}),e.jsx(f,{type:"button",classLabel:"delete_patient",label:"Delete",icon:w,backgroundColor:"#FF1A1A",method:()=>g(s)})]})]},h)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},$=({exitUser:r,procedureCode:n,isEdit:t})=>{const[a,i]=m.useState(""),[x,l]=m.useState(""),[c,o]=m.useState(""),{isVisible:g,isInitialized:u,triggerEnter:j,triggerExit:b}=E(500);m.useEffect(()=>{n?(i(n.code||""),l(n.price||""),o(n.description||"")):(i(""),l(""),o(""))},[n]);const s=d=>{const p=d.target.value;/^\d*\.?\d*$/.test(p)&&l(p)},h=d=>{d.preventDefault();const p={code:a,price:x,description:c};console.log(t?"Editing procedure code:":"Adding procedure code:",p),r()};m.useEffect(()=>{j()},[j]);const C=()=>{b(()=>{r&&r()})};return _.createPortal(e.jsxs("div",{className:`form_container procedureCodes_form_container glassmorphism shadow ${u?g?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:C}),e.jsx("div",{className:"form procedureCodes_form glassmorphism shadow",children:e.jsxs("form",{onSubmit:h,children:[e.jsx("h1",{children:t?"Edit Procedure Code":"Add Procedure Code"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name",children:[e.jsx("label",{htmlFor:"codeName",children:"Code"}),e.jsx(P,{fullWidth:!0,value:a,onChange:d=>i(d.target.value),id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"price",children:[e.jsx("label",{htmlFor:"priceName",children:"Price"}),e.jsx(P,{fullWidth:!0,value:x,onChange:s,id:"outlined-basic",variant:"outlined",type:"number",InputProps:{inputMode:"decimal",step:"0.01",min:"0"}})]}),e.jsxs("div",{className:"description full",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx(k,{value:c,onChange:d=>o(d.target.value),size:"lg",variant:"outlined",sx:{borderColor:"rgb(158, 158, 158)",borderWidth:"1px",borderRadius:"5px",background:"transparent",width:"100%"}})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:C,children:"Cancel"})]})]})})]}),document.body)},z=(r,n)=>{const t=a=>a?a.toString().toLowerCase():"";return r.filter(a=>{var l;const i=t(n.search||"");return!n.search||[(l=a.id)==null?void 0:l.toString(),a.code,a.description,a.price,a.status].some(c=>t(c).includes(i))})},Y=()=>{const{filters:r,rowsPerPage:n,currentPage:t,currentPageData:a,totalPages:i,handleFilterChange:x,handleRowsPerPageChange:l,handlePageChange:c,loading:o}=F(v,{search:""},z),[g,u]=m.useState(!1),[j,b]=m.useState(null),s=()=>u(!0),h=()=>{u(!1),b(null)},C=d=>{b(d),u(!0)};return e.jsxs(e.Fragment,{children:[g&&e.jsx($,{exitUser:h,procedureCode:j,isEdit:!!j}),e.jsxs("div",{className:"procedure_code auto-sizing",children:[e.jsx(y,{filters:r,onFilterChange:x,data:v,hasAddToTableButton:!0,method:s}),e.jsx("div",{className:"table_controls",children:e.jsx(T,{rowsPerPage:n,handleRowsPerPageChange:l})}),e.jsxs("div",{className:"table_area",children:[o&&e.jsx(L,{}),e.jsx(B,{data:a,onEditProcedureCode:C})]}),i>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>c(t-1),disabled:t===1,children:"Back"}),e.jsxs("span",{children:["Page ",t," of ",i]}),e.jsx("button",{className:"shadow",onClick:()=>c(t+1),disabled:t===i,children:"Next"})]})]})]})};export{Y as default};
