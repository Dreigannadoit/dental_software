import{r as m,u as C,j as e,P as A,J as D,A as j,L as P,M as S,bd as w,be as E,aA as v,bi as G,by as F,bF as g,bA as k,bB as _,bC as y}from"./index-BZNs44lt.js";import{u as T,C as L}from"./useUpdateStatus-DE3CP_P4.js";const R=({data:o,onEditGrade:n})=>{const[s,a]=m.useState(!0),{updateStatus:r,setChangeStatusRef:x}=T(),{isVisible:l,isExiting:d,popupData:i,openPopup:p,closePopup:h}=C(),b=()=>{i&&console.log("Request to delete patient with ID:",i.id),h()},u=[...o].sort((t,c)=>s?t.id-c.id:c.id-t.id);return e.jsxs(e.Fragment,{children:[l&&e.jsx(A,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${i==null?void 0:i.name}. This action cannot be undone.`,icon:D,onConfirm:b,onCancel:h,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:d,customClass:"delete-popup"}),e.jsx(L,{ref:t=>x(t)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>a(!s),className:`${s?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:u.length>0?u.map((t,c)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.description}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(j,{type:"button",classLabel:"edit_patient",label:"Edit",icon:P,backgroundColor:"#1E8631",method:()=>n(t)}),e.jsx(j,{type:"button",classLabel:"delete_patient",label:"Delete",icon:S,backgroundColor:"#FF1A1A",method:()=>p(t)})]})]},c)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},B=({exitUser:o,grade:n,isEdit:s})=>{const[a,r]=m.useState(""),[x,l]=m.useState(""),{isVisible:d,isInitialized:i,triggerEnter:p,triggerExit:h}=w(500);m.useEffect(()=>{p()},[p]),m.useEffect(()=>{n?(r(n.name||""),l(n.description||"")):(r(""),l(""))},[n]);const b=t=>{t.preventDefault();const c={name:a,description:x};console.log(s?"Editing grade:":"Adding grade:",c),o()},u=()=>{h(()=>{o&&o()})};return E.createPortal(e.jsxs("div",{className:`form_container grade_form_container glassmorphism shadow ${i?d?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:u}),e.jsx("div",{className:"form grade_form glassmorphism shadow",children:e.jsxs("form",{action:b,children:[e.jsx("h1",{children:"Add Grade"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name full",children:[e.jsx("label",{htmlFor:"schooName",children:"Name"}),e.jsx(v,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"description full",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx(G,{size:"lg",variant:"outlined",sx:{borderColor:"rgb(158, 158, 158)",borderWidth:"1px",borderRadius:"5px",background:"transparent",width:"100%"}})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:u,children:"Cancel"})]})]})})]}),document.body)},I=(o,n)=>{const s=a=>a?a.toString().toLowerCase():"";return o.filter(a=>{var l,d;const r=s(n.search||"");return!n.search||[(l=a.name)==null?void 0:l.toString(),(d=a.id)==null?void 0:d.toString(),a.description].some(i=>s(i).includes(r))})},$=()=>{const{filters:o,rowsPerPage:n,currentPage:s,currentPageData:a,totalPages:r,handleFilterChange:x,handleRowsPerPageChange:l,handlePageChange:d,loading:i}=F(g,{search:""},I),[p,h]=m.useState(!1),[b,u]=m.useState(null),t=()=>h(!0),c=()=>{h(!1),u(null)},f=N=>{u(N),h(!0)};return e.jsxs(e.Fragment,{children:[p&&e.jsx(B,{exitUser:c,grade:b,isEdit:!!b}),e.jsxs("div",{className:"grade auto-sizing",children:[e.jsx(k,{filters:o,onFilterChange:x,data:g,hasAddToTableButton:!0,method:t}),e.jsx("div",{className:"table_controls",children:e.jsx(_,{rowsPerPage:n,handleRowsPerPageChange:l})}),e.jsxs("div",{className:"table_area",children:[i&&e.jsx(y,{}),e.jsx(R,{data:a,onEditGrade:f})]}),r>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>d(s-1),disabled:s===1,children:"Back"}),e.jsxs("span",{children:["Page ",s," of ",r]}),e.jsx("button",{className:"shadow",onClick:()=>d(s+1),disabled:s===r,children:"Next"})]})]})]})};export{$ as default};
