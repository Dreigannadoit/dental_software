import{r as j,u as g,j as e,P as C,a_ as f,A as p,a$ as D,b0 as N,aI as v,aJ as A,a3 as P,aN as w,b1 as S,b2 as b,b3 as _,b4 as k,b5 as F}from"./index-DJwQgHTt.js";import{u as E,C as T}from"./useUpdateStatus-tXmyn_BN.js";const y=({data:r})=>{const[n,a]=j.useState(!0),{updateStatus:t,setChangeStatusRef:o}=E(),{isVisible:l,isExiting:c,popupData:i,openPopup:m,closePopup:d}=g(),h=()=>{i&&console.log("Request to delete patient with ID:",i.id),d()},u=[...r].sort((s,x)=>n?s.id-x.id:x.id-s.id);return e.jsxs(e.Fragment,{children:[l&&e.jsx(C,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${i==null?void 0:i.code}. This action cannot be undone.`,icon:f,onConfirm:h,onCancel:d,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:c,customClass:"delete-popup"}),e.jsx(T,{ref:s=>o(s)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>a(!n),className:`${n?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:u.length>0?u.map((s,x)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.code}),e.jsx("td",{children:s.description}),e.jsx("td",{className:`${s.status==="Active"||s.status==="active"||s.status===!0?"active":"inactive "}`,children:e.jsx("span",{children:e.jsx("button",{onClick:()=>t(s),children:s.status==="Active"||s.status==="active"||s.status===!0?"Active":"Inactive"})})}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(p,{type:"routerLink",classLabel:"edit_patient",label:"Edit",icon:D,backgroundColor:"#1E8631",url:"#"}),e.jsx(p,{type:"button",classLabel:"delete_patient",label:"Delete",icon:N,backgroundColor:"#FF1A1A",method:()=>m(s)})]})]},x)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},L=({exitUser:r})=>{const{isVisible:n,isInitialized:a,triggerEnter:t,triggerExit:o}=v(500);j.useEffect(()=>{t()},[t]);const l=()=>{o(()=>{r&&r()})};return A.createPortal(e.jsxs("div",{className:`form_container dentalCode_form_container glassmorphism shadow ${a?n?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:l}),e.jsx("div",{className:"form dentalCode_form glassmorphism shadow",children:e.jsxs("form",{children:[e.jsx("h1",{children:"Add Code"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name full",children:[e.jsx("label",{htmlFor:"codeName",children:"Code"}),e.jsx(P,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"description full",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx(w,{size:"lg",variant:"outlined",sx:{borderColor:"rgb(158, 158, 158)",borderWidth:"1px",borderRadius:"5px",background:"transparent",width:"100%"}})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:l,children:"Cancel"})]})]})})]}),document.body)},R=(r,n)=>{const a=t=>t?t.toString().toLowerCase():"";return r.filter(t=>{var c;const o=a(n.search||"");return!n.search||[(c=t.id)==null?void 0:c.toString(),t.code,t.description,t.status].some(i=>a(i).includes(o))})},B=()=>{const{filters:r,rowsPerPage:n,currentPage:a,currentPageData:t,totalPages:o,handleFilterChange:l,handleRowsPerPageChange:c,handlePageChange:i,loading:m}=S(b,{search:""},R),[d,h]=j.useState(!1),u=()=>h(!0),s=()=>h(!1);return e.jsxs(e.Fragment,{children:[d&&e.jsx(L,{exitUser:s}),e.jsxs("div",{className:"dental_code auto-sizing",children:[e.jsx(_,{filters:r,onFilterChange:l,data:b,hasAddToTableButton:!0,method:u}),e.jsx("div",{className:"table_controls",children:e.jsx(k,{rowsPerPage:n,handleRowsPerPageChange:c})}),e.jsxs("div",{className:"table_area",children:[m&&e.jsx(F,{}),e.jsx(y,{data:t})]}),o>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>i(a-1),disabled:a===1,children:"Back"}),e.jsxs("span",{children:["Page ",a," of ",o]}),e.jsx("button",{className:"shadow",onClick:()=>i(a+1),disabled:a===o,children:"Next"})]})]})]})};export{B as default};
