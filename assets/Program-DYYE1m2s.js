import{r as i,u as w,j as e,P as M,J as k,A as P,L as T,M as Y,bd as L,be as I,aA as y,bv as C,bx as A,aq as l,bi as R,by as J,bR as D,bA as W,bB as B,bC as $}from"./index-Bv4EZULt.js";import{u as z,C as O}from"./useUpdateStatus-DwGrJaqf.js";const q=({data:d,onEditProgram:a})=>{const[s,n]=i.useState(!0),{updateStatus:o,setChangeStatusRef:x}=z(),{isVisible:h,isExiting:u,popupData:r,openPopup:b,closePopup:c}=w(),g=()=>{r&&console.log("Request to delete patient with ID:",r.id),c()},j=[...d].sort((t,m)=>s?t.id-m.id:m.id-t.id);return e.jsxs(e.Fragment,{children:[h&&e.jsx(M,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${r==null?void 0:r.name}. This action cannot be undone.`,icon:k,onConfirm:g,onCancel:c,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:u,customClass:"delete-popup"}),e.jsx(O,{ref:t=>x(t)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>n(!s),className:`${s?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"School Year"}),e.jsx("th",{children:"Start Month"}),e.jsx("th",{children:"End Month"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:j.length>0?j.map((t,m)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.school_year}),e.jsx("td",{children:t.start_month}),e.jsx("td",{children:t.end_month}),e.jsx("td",{className:`${t.status==="Active"||t.status==="active"||t.status===!0?"active":"inactive "}`,children:e.jsx("span",{children:e.jsx("button",{onClick:()=>o(t),children:t.status==="Active"||t.status==="active"||t.status===!0?"Active":"Inactive"})})}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(P,{type:"button",classLabel:"edit_patient",label:"Edit",icon:T,backgroundColor:"#1E8631",method:()=>a(t)}),e.jsx(P,{type:"button",classLabel:"delete_patient",label:"Delete",icon:Y,backgroundColor:"#FF1A1A",method:()=>b(t)})]})]},m)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},V=({exitUser:d,program:a,isEdit:s})=>{const[n,o]=i.useState(""),[x,h]=i.useState(""),[u,r]=i.useState(""),[b,c]=i.useState(""),[g,j]=i.useState(""),[t,m]=i.useState(""),{isVisible:_,isInitialized:p,triggerEnter:f,triggerExit:E}=L(500);i.useEffect(()=>{f()},[f]),i.useEffect(()=>{a?(o(a.name||""),h(a.start_month||""),r(a.start_year||""),c(a.end_month||""),j(a.end_year||""),m(a.description||"")):(o(""),h(""),r(""),c(""),j(""),m(""))},[a]);const F=v=>{v.preventDefault();const N={name:n,start_month:x,start_year:u,end_month:b,end_year:g,description:t};console.log(s?"Editing program:":"Adding program:",N),d()},S=()=>{E(()=>{d&&d()})};return I.createPortal(e.jsxs("div",{className:`form_container program_form_container glassmorphism shadow ${p?_?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:S}),e.jsx("div",{className:"form program_form glassmorphism shadow",children:e.jsxs("form",{onSubmit:F,children:[e.jsx("h1",{children:s?"Edit Program":"Add Program"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name full",children:[e.jsx("label",{htmlFor:"schooName",children:"Name"}),e.jsx(y,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"school_year_start_month",children:[e.jsx("label",{htmlFor:"school_year_start_month",children:"School Year Start"}),e.jsx(C,{fullWidth:!0,children:e.jsxs(A,{labelId:"onChange-label",value:x,onChange:v=>h(v.target.value),displayEmpty:!0,children:[e.jsx(l,{value:"",disabled:!0,children:"Select Month"}),e.jsx(l,{value:"January",children:"January"}),e.jsx(l,{value:"February",children:"February"}),e.jsx(l,{value:"March",children:"March"}),e.jsx(l,{value:"April",children:"April"}),e.jsx(l,{value:"May",children:"May"}),e.jsx(l,{value:"June",children:"June"}),e.jsx(l,{value:"July",children:"July"}),e.jsx(l,{value:"August",children:"August"}),e.jsx(l,{value:"September",children:"September"}),e.jsx(l,{value:"October",children:"October"}),e.jsx(l,{value:"November",children:"November"}),e.jsx(l,{value:"December",children:"December"})]})})]}),e.jsxs("div",{className:"school_year_start_year",children:[e.jsx("label",{htmlFor:"school_year_start_year"}),e.jsx(y,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"shool_year_end_month",children:[e.jsx("label",{htmlFor:"shool_year_end_month",children:"School Year End"}),e.jsx(C,{fullWidth:!0,children:e.jsxs(A,{labelId:"onChange-label",value:b,onChange:v=>c(v.target.value),displayEmpty:!0,children:[e.jsx(l,{value:"",disabled:!0,children:"Select Type"}),e.jsx(l,{value:"school",children:"School"}),e.jsx(l,{value:"facility",children:"Facility"})]})})]}),e.jsxs("div",{className:"school_year_end_year",children:[e.jsx("label",{htmlFor:"school_year_end_year"}),e.jsx(y,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"description full",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx(R,{size:"lg",variant:"outlined",sx:{borderColor:"rgb(158, 158, 158)",borderWidth:"1px",borderRadius:"5px",background:"transparent",width:"100%"}})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:S,children:"Cancel"})]})]})})]}),document.body)},Q=(d,a)=>{const s=n=>n?n.toString().toLowerCase():"";return d.filter(n=>{var u;const o=s(a.search||""),x=!a.status||s(n.status)===s(a.status),h=!a.search||[n.name,(u=n.id)==null?void 0:u.toString(),n.school_year,n.start_month,n.end_month,n.status].some(r=>s(r).includes(o));return x&&h})},K=()=>{const{filters:d,rowsPerPage:a,currentPage:s,currentPageData:n,totalPages:o,handleFilterChange:x,handleRowsPerPageChange:h,handlePageChange:u,loading:r}=J(D,{search:""},Q),[b,c]=i.useState(!1),[g,j]=i.useState(null),t=()=>c(!0),m=()=>{c(!1),j(null)},_=p=>{j(p),c(!0)};return e.jsxs(e.Fragment,{children:[b&&e.jsx(V,{exitUser:m,program:g,isEdit:!!g}),e.jsxs("div",{className:"program auto-sizing",children:[e.jsx(W,{filters:d,onFilterChange:x,data:D,hasAddToTableButton:!0,method:t}),e.jsx("div",{className:"table_controls",children:e.jsx(B,{rowsPerPage:a,handleRowsPerPageChange:h})}),e.jsxs("div",{className:"table_area",children:[r&&e.jsx($,{}),e.jsx(q,{data:n,onEditProgram:_})]}),o>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>u(s-1),disabled:s===1,children:"Back"}),e.jsxs("span",{children:["Page ",s," of ",o]}),e.jsx("button",{className:"shadow",onClick:()=>u(s+1),disabled:s===o,children:"Next"})]})]})]})};export{K as default};
