import{r as j,u as A,j as e,P as C,J as N,A as g,L as v,M as P,bd as S,be as w,aA as b,bA as D,bB as F,aq as p,bu as y,c2 as f,bw as E,bx as U,by as k}from"./index-CpieBdCD.js";import{u as _,C as L}from"./useUpdateStatus-D43ODfo4.js";const T=({data:r})=>{const[l,n]=j.useState(!0),{updateStatus:s,setChangeStatusRef:i}=_(),{isVisible:d,isExiting:o,popupData:a,openPopup:c,closePopup:h}=A(),m=()=>{a&&console.log("Request to delete patient with ID:",a.id),h()},u=[...r].sort((t,x)=>l?t.id-x.id:x.id-t.id);return e.jsxs(e.Fragment,{children:[d&&e.jsx(C,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${a==null?void 0:a.name}. This action cannot be undone.`,icon:N,onConfirm:m,onCancel:h,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:o,customClass:"delete-popup"}),e.jsx(L,{ref:t=>i(t)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>n(!l),className:`${l?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Username"}),e.jsx("th",{children:"Role"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:u.length>0?u.map((t,x)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.username}),e.jsx("td",{children:t.role}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(g,{type:"routerLink",classLabel:"edit_patient",label:"Edit",icon:v,backgroundColor:"#1E8631",url:"#"}),e.jsx(g,{type:"button",classLabel:"delete_patient",label:"Delete",icon:P,backgroundColor:"#FF1A1A",method:()=>c(t)})]})]},x)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},R=({exitUser:r})=>{const[l,n]=j.useState(),{isVisible:s,isInitialized:i,triggerEnter:d,triggerExit:o}=S(500);j.useEffect(()=>{d()},[d]);const a=()=>{o(()=>{r&&r()})};return w.createPortal(e.jsxs("div",{className:`form_container users_form_container glassmorphism shadow ${i?s?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:a}),e.jsx("div",{className:"form users_form glassmorphism shadow",children:e.jsxs("form",{action:"",children:[e.jsx("h1",{children:"Add Code"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx(b,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"username",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx(b,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"email",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx(b,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"role",children:[e.jsx("label",{htmlFor:"role",children:"Role"}),e.jsx(D,{fullWidth:!0,children:e.jsxs(F,{labelId:"onChange-label",value:l,onChange:c=>n(c.target.value),displayEmpty:!0,children:[e.jsx(p,{value:"",disabled:!0,children:"Select Type"}),e.jsx(p,{value:"Admin",children:"Admin"}),e.jsx(p,{value:"VA-Admin",children:"VA-Admin"})]})})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:a,children:"Cancel"})]})]})})]}),document.body)},I=(r,l)=>{const n=s=>s?s.toString().toLowerCase():"";return r.filter(s=>{var o;const i=n(l.search||"");return!l.search||[(o=s.id)==null?void 0:o.toString(),s.name,s.email,s.username,s.role].some(a=>n(a).includes(i))})},W=()=>{const{filters:r,rowsPerPage:l,currentPage:n,currentPageData:s,totalPages:i,handleFilterChange:d,handleRowsPerPageChange:o,handlePageChange:a,loading:c}=y(f,{search:""},I),[h,m]=j.useState(!1),u=()=>m(!0),t=()=>m(!1);return e.jsxs(e.Fragment,{children:[h&&e.jsx(R,{exitUser:t}),e.jsxs("div",{className:"users auto-sizing",children:[e.jsx(E,{filters:r,onFilterChange:d,data:f,hasAddToTableButton:!0,method:u}),e.jsx("div",{className:"table_controls",children:e.jsx(U,{rowsPerPage:l,handleRowsPerPageChange:o})}),e.jsxs("div",{className:"table_area",children:[c&&e.jsx(k,{}),e.jsx(T,{data:s})]}),i>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>a(n-1),disabled:n===1,children:"Back"}),e.jsxs("span",{children:["Page ",n," of ",i]}),e.jsx("button",{className:"shadow",onClick:()=>a(n+1),disabled:n===i,children:"Next"})]})]})]})};export{W as default};
