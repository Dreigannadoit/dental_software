import{r as o,u as P,j as e,P as F,J as D,A as C,L as E,M as w,bd as T,be as k,aA as N,bv as _,bx as L,aq as v,bL as I,c2 as R,by as B,c0 as A,bA as M,bB as $,bC as G}from"./index-i_H5Jyig.js";import{u as W,C as Y}from"./useUpdateStatus-Fb8fiXmb.js";const q=({data:d,onEditSchool:a})=>{const[l,t]=o.useState(!0),{updateStatus:r,setChangeStatusRef:i}=W(),{isVisible:c,isExiting:h,popupData:n,openPopup:m,closePopup:x}=P(),j=()=>{n&&console.log("Request to delete patient with ID:",n.id),x()},p=[...d].sort((s,u)=>l?s.id-u.id:u.id-s.id);return e.jsxs(e.Fragment,{children:[c&&e.jsx(F,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${n==null?void 0:n.name}. This action cannot be undone.`,icon:D,onConfirm:j,onCancel:x,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:h,customClass:"delete-popup"}),e.jsx(Y,{ref:s=>i(s)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>t(!l),className:`${l?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Adress"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:p.length>0?p.map((s,u)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.address}),e.jsx("td",{children:s.type}),e.jsx("td",{className:`${s.status==="Active"||s.status==="active"?"active":"inactive "}`,children:e.jsx("span",{children:e.jsx("button",{onClick:()=>r(s),children:s.status==="Active"||s.status==="active"?"Active":"Inactive"})})}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(C,{type:"button",classLabel:"edit_patient",label:"Edit",icon:E,backgroundColor:"#1E8631",method:()=>a(s)}),e.jsx(C,{type:"button",classLabel:"delete_patient",label:"Delete",icon:w,backgroundColor:"#FF1A1A",method:()=>m(s)})]})]},u)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},z=({exitUser:d,school:a,isEdit:l})=>{const[t,r]=o.useState(""),[i,c]=o.useState(""),[h,n]=o.useState([]),[m,x]=o.useState(""),{isVisible:j,isInitialized:p,triggerEnter:s,triggerExit:u}=T(500);o.useEffect(()=>{s()},[s]),o.useEffect(()=>{a?(r(a.name||""),c(a.type||""),n(a.grade||[]),x(a.address||"")):(r(""),c(""),n([]),x(""))},[a]);const S=b=>{n(b)},f=b=>{b.preventDefault();const y={name:t,type:i,grade:h,address:m};console.log(l?"Editing school:":"Adding school:",y),d()},g=()=>{u(()=>{d&&d()})};return k.createPortal(e.jsxs("div",{className:`form_container school_form_container glassmorphism shadow ${p?j?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:g}),e.jsx("div",{className:"form school_form glassmorphism shadow",children:e.jsxs("form",{action:f,children:[e.jsx("h1",{children:l?"Edit School":"Add School"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name",children:[e.jsx("label",{htmlFor:"schooName",children:"Name"}),e.jsx(N,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"type",children:[e.jsx("label",{htmlFor:"type",children:"Type"}),e.jsx(_,{fullWidth:!0,children:e.jsxs(L,{labelId:"onChange-label",value:i,onChange:b=>c(b.target.value),displayEmpty:!0,children:[e.jsx(v,{value:"",disabled:!0,children:"Select Type"}),e.jsx(v,{value:"school",children:"School"}),e.jsx(v,{value:"facility",children:"Facility"})]})})]}),e.jsxs("div",{className:"grade",children:[e.jsx("label",{htmlFor:"grade",children:"Grade"}),e.jsx(I,{closeMenuOnSelect:!1,options:R,onChange:S,value:h})]}),e.jsxs("div",{className:"address",children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx(N,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:g,children:"Cancel"})]})]})})]}),document.body)},O=(d,a)=>{const l=t=>t?t.toString().toLowerCase():"";return d.filter(t=>{var n;const r=l(a.search||""),i=!a.search||[t.name,(n=t.id)==null?void 0:n.toString(),t.address,t.type,t.status].some(m=>l(m).includes(r)),c=!a.status||t.status===a.status,h=!a.type||t.type===a.type;return i&&c&&h})},Q=()=>{const d={search:"",type:"",status:""},{filters:a,rowsPerPage:l,currentPage:t,currentPageData:r,totalPages:i,handleFilterChange:c,handleRowsPerPageChange:h,handlePageChange:n,loading:m}=B(A,d,O),[x,j]=o.useState(!1),[p,s]=o.useState(null),u=()=>j(!0),S=()=>{j(!1),s(null)},f=g=>{s(g),j(!0)};return e.jsxs(e.Fragment,{children:[x&&e.jsx(z,{exitUser:S,school:p,isEdit:!!p}),e.jsxs("div",{className:"schools auto-sizing",children:[e.jsx(M,{filters:a,onFilterChange:c,data:A,hasTypeFilter:!0,hasStatusfilter:!0,hasAddToTableButton:!0,method:u}),e.jsx("div",{className:"table_controls",children:e.jsx($,{rowsPerPage:l,handleRowsPerPageChange:h})}),e.jsxs("div",{className:"table_area",children:[m&&e.jsx(G,{}),e.jsx(q,{data:r,onEditSchool:f})]}),i>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>n(t-1),disabled:t===1,children:"Back"}),e.jsxs("span",{children:["Page ",t," of ",i]}),e.jsx("button",{className:"shadow",onClick:()=>n(t+1),disabled:t===i,children:"Next"})]})]})]})};export{Q as default};
