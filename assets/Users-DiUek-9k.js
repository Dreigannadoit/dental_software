import{r as m,u as P,j as e,P as E,J as D,A as N,L as U,M as w,bd as F,be as y,aA as v,bv as _,bx as k,aq as C,by as R,c3 as S,bA as L,bB as T,bC as B}from"./index-i_H5Jyig.js";import{u as I,C as V}from"./useUpdateStatus-Fb8fiXmb.js";const W=({data:d,onEditUser:n})=>{const[a,t]=m.useState(!0),{updateStatus:i,setChangeStatusRef:x}=I(),{isVisible:o,isExiting:c,popupData:l,openPopup:b,closePopup:r}=P(),g=()=>{l&&console.log("Request to delete patient with ID:",l.id),r()},j=[...d].sort((s,u)=>a?s.id-u.id:u.id-s.id);return e.jsxs(e.Fragment,{children:[o&&e.jsx(E,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${l==null?void 0:l.name}. This action cannot be undone.`,icon:D,onConfirm:g,onCancel:r,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:c,customClass:"delete-popup"}),e.jsx(V,{ref:s=>x(s)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>t(!a),className:`${a?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Username"}),e.jsx("th",{children:"Role"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:j.length>0?j.map((s,u)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.username}),e.jsx("td",{children:s.role}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(N,{type:"button",classLabel:"edit_patient",label:"Edit",icon:U,backgroundColor:"#1E8631",method:()=>n(s)}),e.jsx(N,{type:"button",classLabel:"delete_patient",label:"Delete",icon:w,backgroundColor:"#FF1A1A",method:()=>b(s)})]})]},u)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},M=({exitUser:d,user:n,isEdit:a})=>{const[t,i]=m.useState(""),[x,o]=m.useState(""),[c,l]=m.useState(""),[b,r]=m.useState(""),{isVisible:g,isInitialized:j,triggerEnter:s,triggerExit:u}=F(500);m.useEffect(()=>{n?(i(n.name||""),o(n.username||""),l(n.email||""),r(n.role||"")):(i(""),o(""),l(""),r(""))},[n]),m.useEffect(()=>{s()},[s]);const f=h=>{h.preventDefault();const A={name:t,username:x,email:c,role:b};console.log(a?"Editing user:":"Adding user:",A),d()},p=()=>{u(()=>{d&&d()})};return y.createPortal(e.jsxs("div",{className:`form_container users_form_container glassmorphism shadow ${j?g?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:p}),e.jsx("div",{className:"form users_form glassmorphism shadow",children:e.jsxs("form",{onSubmit:f,children:[e.jsx("h1",{children:a?"Edit User":"Add User"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx(v,{fullWidth:!0,value:t,onChange:h=>i(h.target.value),id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"username",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx(v,{fullWidth:!0,value:x,onChange:h=>o(h.target.value),id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"email",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx(v,{fullWidth:!0,value:c,onChange:h=>l(h.target.value),id:"outlined-basic",variant:"outlined",type:"email"})]}),e.jsxs("div",{className:"role",children:[e.jsx("label",{htmlFor:"role",children:"Role"}),e.jsx(_,{fullWidth:!0,children:e.jsxs(k,{value:b,onChange:h=>r(h.target.value),displayEmpty:!0,children:[e.jsx(C,{value:"",disabled:!0,children:"Select Role"}),e.jsx(C,{value:"Admin",children:"Admin"}),e.jsx(C,{value:"VA-Admin",children:"VA-Admin"})]})})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:p,children:"Cancel"})]})]})})]}),document.body)},Y=(d,n)=>{const a=t=>t?t.toString().toLowerCase():"";return d.filter(t=>{var o;const i=a(n.search||"");return!n.search||[(o=t.id)==null?void 0:o.toString(),t.name,t.email,t.username,t.role].some(c=>a(c).includes(i))})},z=()=>{const{filters:d,rowsPerPage:n,currentPage:a,currentPageData:t,totalPages:i,handleFilterChange:x,handleRowsPerPageChange:o,handlePageChange:c,loading:l}=R(S,{search:""},Y),[b,r]=m.useState(!1),[g,j]=m.useState(null),s=()=>r(!0),u=()=>{r(!1),j(null)},f=p=>{j(p),r(!0)};return e.jsxs(e.Fragment,{children:[b&&e.jsx(M,{exitUser:u,user:g,isEdit:!!g}),e.jsxs("div",{className:"users auto-sizing",children:[e.jsx(L,{filters:d,onFilterChange:x,data:S,hasAddToTableButton:!0,method:s}),e.jsx("div",{className:"table_controls",children:e.jsx(T,{rowsPerPage:n,handleRowsPerPageChange:o})}),e.jsxs("div",{className:"table_area",children:[l&&e.jsx(B,{}),e.jsx(W,{data:t,onEditUser:f})]}),i>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>c(a-1),disabled:a===1,children:"Back"}),e.jsxs("span",{children:["Page ",a," of ",i]}),e.jsx("button",{className:"shadow",onClick:()=>c(a+1),disabled:a===i,children:"Next"})]})]})]})};export{z as default};
