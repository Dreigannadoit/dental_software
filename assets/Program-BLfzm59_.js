import{r as j,u as f,j as e,P as N,J as C,A as g,L as S,M as P,bd as A,be as F,aA as v,bv as p,bx as _,aq as a,bi as D,by as w,bR as y,bA as E,bB as M,bC as k}from"./index-DhTUAWX1.js";import{u as L,C as T}from"./useUpdateStatus-39HVajXj.js";const I=({data:o})=>{const[r,l]=j.useState(!0),{updateStatus:t,setChangeStatusRef:i}=L(),{isVisible:d,isExiting:h,popupData:n,openPopup:u,closePopup:x}=f(),c=()=>{n&&console.log("Request to delete patient with ID:",n.id),x()},m=[...o].sort((s,b)=>r?s.id-b.id:b.id-s.id);return e.jsxs(e.Fragment,{children:[d&&e.jsx(N,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${n==null?void 0:n.name}. This action cannot be undone.`,icon:C,onConfirm:c,onCancel:x,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:h,customClass:"delete-popup"}),e.jsx(T,{ref:s=>i(s)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>l(!r),className:`${r?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"School Year"}),e.jsx("th",{children:"Start Month"}),e.jsx("th",{children:"End Month"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:m.length>0?m.map((s,b)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.school_year}),e.jsx("td",{children:s.start_month}),e.jsx("td",{children:s.end_month}),e.jsx("td",{className:`${s.status==="Active"||s.status==="active"||s.status===!0?"active":"inactive "}`,children:e.jsx("span",{children:e.jsx("button",{onClick:()=>t(s),children:s.status==="Active"||s.status==="active"||s.status===!0?"Active":"Inactive"})})}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(g,{type:"routerLink",classLabel:"edit_patient",label:"Edit",icon:S,backgroundColor:"#1E8631",url:"#"}),e.jsx(g,{type:"button",classLabel:"delete_patient",label:"Delete",icon:P,backgroundColor:"#FF1A1A",method:()=>u(s)})]})]},b)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},R=({exitUser:o})=>{const[r,l]=j.useState(),[t,i]=j.useState(),{isVisible:d,isInitialized:h,triggerEnter:n,triggerExit:u}=A(500);j.useEffect(()=>{n()},[n]);const x=()=>{u(()=>{o&&o()})};return F.createPortal(e.jsxs("div",{className:`form_container program_form_container glassmorphism shadow ${h?d?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:x}),e.jsx("div",{className:"form program_form glassmorphism shadow",children:e.jsxs("form",{action:"",children:[e.jsx("h1",{children:"Add Program"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name full",children:[e.jsx("label",{htmlFor:"schooName",children:"Name"}),e.jsx(v,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"school_year_start_month",children:[e.jsx("label",{htmlFor:"school_year_start_month",children:"School Year Start"}),e.jsx(p,{fullWidth:!0,children:e.jsxs(_,{labelId:"onChange-label",value:r,onChange:c=>l(c.target.value),displayEmpty:!0,children:[e.jsx(a,{value:"",disabled:!0,children:"Select Month"}),e.jsx(a,{value:"January",children:"January"}),e.jsx(a,{value:"February",children:"February"}),e.jsx(a,{value:"March",children:"March"}),e.jsx(a,{value:"April",children:"April"}),e.jsx(a,{value:"May",children:"May"}),e.jsx(a,{value:"June",children:"June"}),e.jsx(a,{value:"July",children:"July"}),e.jsx(a,{value:"August",children:"August"}),e.jsx(a,{value:"September",children:"September"}),e.jsx(a,{value:"October",children:"October"}),e.jsx(a,{value:"November",children:"November"}),e.jsx(a,{value:"December",children:"December"})]})})]}),e.jsxs("div",{className:"school_year_start_year",children:[e.jsx("label",{htmlFor:"school_year_start_year"}),e.jsx(v,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"shool_year_end_month",children:[e.jsx("label",{htmlFor:"shool_year_end_month",children:"School Year End"}),e.jsx(p,{fullWidth:!0,children:e.jsxs(_,{labelId:"onChange-label",value:t,onChange:c=>i(c.target.value),displayEmpty:!0,children:[e.jsx(a,{value:"",disabled:!0,children:"Select Type"}),e.jsx(a,{value:"school",children:"School"}),e.jsx(a,{value:"facility",children:"Facility"})]})})]}),e.jsxs("div",{className:"school_year_end_year",children:[e.jsx("label",{htmlFor:"school_year_end_year"}),e.jsx(v,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"description full",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx(D,{size:"lg",variant:"outlined",sx:{borderColor:"rgb(158, 158, 158)",borderWidth:"1px",borderRadius:"5px",background:"transparent",width:"100%"}})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:x,children:"Cancel"})]})]})})]}),document.body)},J=(o,r)=>{const l=t=>t?t.toString().toLowerCase():"";return o.filter(t=>{var n;const i=l(r.search||""),d=!r.status||l(t.status)===l(r.status),h=!r.search||[t.name,(n=t.id)==null?void 0:n.toString(),t.school_year,t.start_month,t.end_month,t.status].some(u=>l(u).includes(i));return d&&h})},B=()=>{const{filters:o,rowsPerPage:r,currentPage:l,currentPageData:t,totalPages:i,handleFilterChange:d,handleRowsPerPageChange:h,handlePageChange:n,loading:u}=w(y,{search:""},J),[x,c]=j.useState(!1),m=()=>c(!0),s=()=>c(!1);return e.jsxs(e.Fragment,{children:[x&&e.jsx(R,{exitUser:s}),e.jsxs("div",{className:"program auto-sizing",children:[e.jsx(E,{filters:o,onFilterChange:d,data:y,hasAddToTableButton:!0,method:m}),e.jsx("div",{className:"table_controls",children:e.jsx(M,{rowsPerPage:r,handleRowsPerPageChange:h})}),e.jsxs("div",{className:"table_area",children:[u&&e.jsx(k,{}),e.jsx(I,{data:t})]}),i>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>n(l-1),disabled:l===1,children:"Back"}),e.jsxs("span",{children:["Page ",l," of ",i]}),e.jsx("button",{className:"shadow",onClick:()=>n(l+1),disabled:l===i,children:"Next"})]})]})]})};export{B as default};
