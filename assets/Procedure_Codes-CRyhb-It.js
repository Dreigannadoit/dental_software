import{r as j,u as C,j as e,P as f,J as P,A as b,L as v,M as N,bd as A,be as D,aA as p,bi as w,bu as S,bO as g,bw as k,bx as _,by as F}from"./index-CpieBdCD.js";import{u as y,C as E}from"./useUpdateStatus-D43ODfo4.js";const L=({data:r})=>{const[i,a]=j.useState(!0),{updateStatus:t,setChangeStatusRef:l}=y(),{isVisible:c,isExiting:o,popupData:n,openPopup:h,closePopup:u}=C(),d=()=>{n&&console.log("Request to delete patient with ID:",n.id),u()},x=[...r].sort((s,m)=>i?s.id-m.id:m.id-s.id);return e.jsxs(e.Fragment,{children:[c&&e.jsx(f,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${n==null?void 0:n.code}. This action cannot be undone.`,icon:P,onConfirm:d,onCancel:u,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:o,customClass:"delete-popup"}),e.jsx(E,{ref:s=>l(s)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>a(!i),className:`${i?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:x.length>0?x.map((s,m)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.code}),e.jsx("td",{children:s.description}),e.jsx("td",{children:s.price}),e.jsx("td",{className:`${s.status==="Active"||s.status==="active"||s.status===!0?"active":"inactive "}`,children:e.jsx("span",{children:e.jsx("button",{onClick:()=>t(s),children:s.status==="Active"||s.status==="active"||s.status===!0?"Active":"Inactive"})})}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(b,{type:"routerLink",classLabel:"edit_patient",label:"Edit",icon:v,backgroundColor:"#1E8631",url:"#"}),e.jsx(b,{type:"button",classLabel:"delete_patient",label:"Delete",icon:N,backgroundColor:"#FF1A1A",method:()=>h(s)})]})]},m)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},T=({exitUser:r})=>{const[i,a]=j.useState(""),{isVisible:t,isInitialized:l,triggerEnter:c,triggerExit:o}=A(500),n=u=>{const d=u.target.value;/^\d*\.?\d*$/.test(d)&&a(d)};j.useEffect(()=>{c()},[c]);const h=()=>{o(()=>{r&&r()})};return D.createPortal(e.jsxs("div",{className:`form_container procedureCodes_form_container glassmorphism shadow ${l?t?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:h}),e.jsx("div",{className:"form procedureCodes_form glassmorphism shadow",children:e.jsxs("form",{action:"",children:[e.jsx("h1",{children:"Add Code"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name",children:[e.jsx("label",{htmlFor:"codeName",children:"Code"}),e.jsx(p,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"price",children:[e.jsx("label",{htmlFor:"priceName",children:"Price"}),e.jsx(p,{fullWidth:!0,id:"outlined-basic",variant:"outlined",type:"number",value:i,onChange:n,InputProps:{inputMode:"decimal",step:"0.01",min:"0"}})]}),e.jsxs("div",{className:"description full",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx(w,{size:"lg",variant:"outlined",sx:{borderColor:"rgb(158, 158, 158)",borderWidth:"1px",borderRadius:"5px",background:"transparent",width:"100%"}})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:h,children:"Cancel"})]})]})})]}),document.body)},R=(r,i)=>{const a=t=>t?t.toString().toLowerCase():"";return r.filter(t=>{var o;const l=a(i.search||"");return!i.search||[(o=t.id)==null?void 0:o.toString(),t.code,t.description,t.price,t.status].some(n=>a(n).includes(l))})},B=()=>{const{filters:r,rowsPerPage:i,currentPage:a,currentPageData:t,totalPages:l,handleFilterChange:c,handleRowsPerPageChange:o,handlePageChange:n,loading:h}=S(g,{search:""},R),[u,d]=j.useState(!1),x=()=>d(!0),s=()=>d(!1);return e.jsxs(e.Fragment,{children:[u&&e.jsx(T,{exitUser:s}),e.jsxs("div",{className:"procedure_code auto-sizing",children:[e.jsx(k,{filters:r,onFilterChange:c,data:g,hasAddToTableButton:!0,method:x}),e.jsx("div",{className:"table_controls",children:e.jsx(_,{rowsPerPage:i,handleRowsPerPageChange:o})}),e.jsxs("div",{className:"table_area",children:[h&&e.jsx(F,{}),e.jsx(L,{data:t})]}),l>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>n(a-1),disabled:a===1,children:"Back"}),e.jsxs("span",{children:["Page ",a," of ",l]}),e.jsx("button",{className:"shadow",onClick:()=>n(a+1),disabled:a===l,children:"Next"})]})]})]})};export{B as default};
