import{r as j,u as f,j as e,P as v,a_ as y,A as b,a$ as C,b0 as N,aI as A,aJ as P,a3 as g,b7 as F,b8 as w,U as p,bg as D,bA as T,b1 as k,by as S,b3 as _,b4 as E,b5 as I}from"./index-BjlVeyjO.js";import{u as L,C as R}from"./useUpdateStatus-BsqqAzD4.js";const $=({data:c})=>{const[a,d]=j.useState(!0),{updateStatus:s,setChangeStatusRef:h}=L(),{isVisible:l,isExiting:u,popupData:n,openPopup:i,closePopup:r}=f(),m=()=>{n&&console.log("Request to delete patient with ID:",n.id),r()},o=[...c].sort((t,x)=>a?t.id-x.id:x.id-t.id);return e.jsxs(e.Fragment,{children:[l&&e.jsx(v,{type:"Inform",title:"Are You Sure?",message:`You are about to delete ${n==null?void 0:n.name}. This action cannot be undone.`,icon:y,onConfirm:m,onCancel:r,confirmLabel:"Yes, Delete it!",cancelLabel:"Cancel",isExiting:u,customClass:"delete-popup"}),e.jsx(R,{ref:t=>h(t)}),e.jsx("div",{className:"table",children:e.jsxs("table",{children:[e.jsx("thead",{className:"shadow",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("div",{children:["#",e.jsx("button",{onClick:()=>d(!a),className:`${a?"Ascending":"Descending"}`,children:"âž¤"})]})}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Adress"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:o.length>0?o.map((t,x)=>e.jsxs("tr",{className:"shadow",children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.address}),e.jsx("td",{children:t.type}),e.jsx("td",{className:`${t.status==="Active"||t.status==="active"?"active":"inactive "}`,children:e.jsx("span",{children:e.jsx("button",{onClick:()=>s(t),children:t.status==="Active"||t.status==="active"?"Active":"Inactive"})})}),e.jsxs("td",{className:"crud_controlls",children:[e.jsx(b,{type:"routerLink",classLabel:"edit_patient",label:"Edit",icon:C,backgroundColor:"#1E8631",url:"#"}),e.jsx(b,{type:"button",classLabel:"delete_patient",label:"Delete",icon:N,backgroundColor:"#FF1A1A",method:()=>i(t)})]})]},x)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No matching records found"})})})]})})]})},B=({exitUser:c})=>{const[a,d]=j.useState(),[s,h]=j.useState(),{isVisible:l,isInitialized:u,triggerEnter:n,triggerExit:i}=A(500);j.useEffect(()=>{n()},[n]);const r=o=>{h(s),console.log("Selected items:",s)},m=()=>{i(()=>{c&&c()})};return P.createPortal(e.jsxs("div",{className:`form_container school_form_container glassmorphism shadow ${u?l?"enter-animation":"exit-animation":""}`,children:[e.jsx("button",{className:"form_background",onClick:m}),e.jsx("div",{className:"form school_form glassmorphism shadow",children:e.jsxs("form",{action:"",children:[e.jsx("h1",{children:"Add School"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"name",children:[e.jsx("label",{htmlFor:"schooName",children:"Name"}),e.jsx(g,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]}),e.jsxs("div",{className:"type",children:[e.jsx("label",{htmlFor:"type",children:"Type"}),e.jsx(F,{fullWidth:!0,children:e.jsxs(w,{labelId:"onChange-label",value:a,onChange:o=>d(o.target.value),displayEmpty:!0,children:[e.jsx(p,{value:"",disabled:!0,children:"Select Type"}),e.jsx(p,{value:"school",children:"School"}),e.jsx(p,{value:"facility",children:"Facility"})]})})]}),e.jsxs("div",{className:"grade",children:[e.jsx("label",{htmlFor:"grade",children:"Grade"}),e.jsx(D,{closeMenuOnSelect:!1,options:T,onChange:r,value:s})]}),e.jsxs("div",{className:"address",children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx(g,{fullWidth:!0,id:"outlined-basic",variant:"outlined"})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Submit"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:m,children:"Cancel"})]})]})})]}),document.body)},M=(c,a)=>{const d=s=>s?s.toString().toLowerCase():"";return c.filter(s=>{var i;const h=d(a.search||""),l=!a.search||[s.name,(i=s.id)==null?void 0:i.toString(),s.address,s.type,s.status].some(r=>d(r).includes(h)),u=!a.status||s.status===a.status,n=!a.type||s.type===a.type;return l&&u&&n})},Y=()=>{const c={search:"",type:"",status:""},{filters:a,rowsPerPage:d,currentPage:s,currentPageData:h,totalPages:l,handleFilterChange:u,handleRowsPerPageChange:n,handlePageChange:i,loading:r}=k(S,c,M),[m,o]=j.useState(!1),t=()=>o(!0),x=()=>o(!1);return e.jsxs(e.Fragment,{children:[m&&e.jsx(B,{exitUser:x}),e.jsxs("div",{className:"schools auto-sizing",children:[e.jsx(_,{filters:a,onFilterChange:u,data:S,hasTypeFilter:!0,hasStatusfilter:!0,hasAddToTableButton:!0,method:t}),e.jsx("div",{className:"table_controls",children:e.jsx(E,{rowsPerPage:d,handleRowsPerPageChange:n})}),e.jsxs("div",{className:"table_area",children:[r&&e.jsx(I,{}),e.jsx($,{data:h})]}),l>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>i(s-1),disabled:s===1,children:"Back"}),e.jsxs("span",{children:["Page ",s," of ",l]}),e.jsx("button",{className:"shadow",onClick:()=>i(s+1),disabled:s===l,children:"Next"})]})]})]})};export{Y as default};
