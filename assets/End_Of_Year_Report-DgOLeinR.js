import{bu as g,bT as j,j as e,bw as u,by as b}from"./index-65aRkmu-.js";import{u as N}from"./useExportCsv-C75Tm91b.js";const f=(c,a)=>{const d=s=>s?s.toString().toLowerCase():"";return c.filter(s=>!a.year||s.year===a.year).map(s=>{const l=d(a.search||""),i=s.data.filter(o=>!a.search||Object.values(o).some(r=>d((r==null?void 0:r.toString())||"").includes(l)));return{...s,data:i}}).filter(s=>s.data.length>0)},y=()=>{const{filters:c,currentPage:a,currentPageData:d,totalPages:s,handleFilterChange:l,handlePageChange:i,loading:o}=g(j,{search:"",year:"2024-2025"},f),r=N(),m=()=>{const t=j.reduce((h,{year:n,data:x})=>[...h,...x.map(p=>({...p,year:n}))],[]);r(t,"End_Of_Year_Report.csv")};return e.jsxs("div",{className:"case_management auto-sizing",children:[e.jsx(u,{filters:c,onFilterChange:l,data:j,hasYearFilter:!0}),e.jsx("div",{className:"table_controls",children:e.jsx("button",{className:"Export_BTN shadow",onClick:m,children:"Export"})}),e.jsxs("div",{className:"viewing_area",children:[o&&e.jsx(b,{}),d.map((t,h)=>e.jsxs("div",{children:[e.jsx("h3",{children:t.year}),e.jsx("div",{children:t.data.map((n,x)=>e.jsxs("div",{className:"school_block shadow",children:[e.jsx("h3",{children:n.school}),e.jsxs("div",{className:"school-details",children:[e.jsxs("p",{className:"shadow",children:[e.jsx("strong",{children:"Students Served:"}),e.jsx("br",{}),e.jsx("span",{children:n.numStudentsServed})]}),e.jsxs("p",{className:"shadow",children:[e.jsx("strong",{children:"Receiving Sealant:"}),e.jsx("br",{}),e.jsx("span",{children:n.numReceivingSealant})]}),e.jsxs("p",{className:"shadow",children:[e.jsx("strong",{children:"Receiving Fluoride:"}),e.jsx("br",{}),e.jsx("span",{children:n.numReceivingFlouride})]}),e.jsxs("p",{className:"shadow",children:[e.jsx("strong",{children:"Receiving Prophy:"}),e.jsx("br",{}),e.jsx("span",{children:n.numReceivingPhrophy})]}),e.jsxs("p",{className:"shadow",children:[e.jsx("strong",{children:"Referrals:"}),e.jsx("br",{}),e.jsx("span",{children:n.numReferals})]}),e.jsxs("p",{className:"shadow",children:[e.jsx("strong",{children:"Screened by Dental Hygienist:"}),e.jsx("br",{}),e.jsx("span",{children:n.numberScreenedByDentalHygienist})]}),e.jsxs("p",{className:"shadow",children:[e.jsx("strong",{children:"Third Graders Screened:"}),e.jsx("br",{}),e.jsx("span",{children:n.numberOfTheStudentsScreenedForOralHealth_HowManyWereInThirdGrade})]})]})]},x))})]},h))]}),s>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"shadow",onClick:()=>i(a-1),disabled:a===1,children:"Back"}),e.jsxs("span",{children:["Page ",a," of ",s]}),e.jsx("button",{className:"shadow",onClick:()=>i(a+1),disabled:a===s,children:"Next"})]})]})};export{y as default};
